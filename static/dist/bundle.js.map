{"version":3,"file":"bundle.js","sources":["../js/db.js","../js/hooks.js","../js/toolbar.js","../js/floatButton.js","../js/viewportController.js","../js/ndModal.plugin.js","../js/index.js"],"sourcesContent":["export default {\n  lastCaretPos: 0,\n  keyboardOpen: false,\n};\n","import db from './db';\n\n/** Helper */\n// TODO: refactor needed\nconst isChildOf = (node, parentId) => {\n  while (node != null) {\n    if (node.id === parentId) {\n      return true;\n    }\n    node = node.parentNode;\n  }\n\n  return false;\n};\n\nconst getCurrentCursorPosition = (parentId) => {\n  const selection = $(document).find('iframe[name=\"ace_outer\"]')\n      .contents().find('iframe[name=\"ace_inner\"]').contents()[0].getSelection();\n  let charCount = -1;\n  let node;\n\n  if (selection.focusNode) {\n    if (isChildOf(selection.focusNode, parentId)) {\n      node = selection.focusNode;\n      charCount = selection.focusOffset;\n\n      while (node) {\n        if (node.id === parentId) {\n          break;\n        }\n\n        if (node.previousSibling) {\n          node = node.previousSibling;\n          charCount += node.textContent.length;\n        } else {\n          node = node.parentNode;\n          if (node == null) {\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  return charCount;\n};\n\n/** Hooks */\nexport const aceEditorCSS = () => {\n  if (!clientVars.userAgent.isMobile) return [];\n  return ['ep_mobile_view/static/css/innerMobile.css'];\n};\n\nexport const aceEditEvent = (hookName, call) => {\n  // If it's not a click or a key event and the text hasn't changed then do nothing\n  const cs = call.callstack;\n\n  // save last postion of the caret\n  // TODO: refactor needed\n  if ((cs.type === 'handleKeyEvent')) {\n    setTimeout(() => {\n      db.lastCaretPos = getCurrentCursorPosition('innerdocbody');\n    }, 200);\n  }\n\n  if (!(cs.type === 'handleClick') && !(cs.type === 'handleKeyEvent') && !(cs.docTextChanged)) {\n    return false;\n  }\n  // If it's an initial setup event then do nothing..\n  if (cs.type === 'setBaseText' || cs.type === 'setup') return false;\n\n  // toolbar caret attr check\n  setTimeout(() => {\n    const attributeManager = call.documentAttributeManager;\n    $('#mobileToolbar > ul > li').removeClass('active');\n\n    for (const caretAttr of ['bold', 'italic', 'underline']) {\n      const activeCaret = attributeManager.hasAttributeOnSelectionOrCaretPosition(caretAttr);\n      if (activeCaret) {\n        $(`#mobileToolbar > ul > li[data-action=\"${caretAttr}\"]`).addClass('active');\n      }\n    }\n  }, 250);\n\n  return {};\n};\n","const commands = {};\n\nclass ToolbarItem {\n  constructor(element) {\n    this.$el = element;\n  }\n\n  getCommand() {\n    return this.$el.attr('data-action');\n  }\n\n  getValue() {\n    if (this.isSelect()) {\n      return this.$el.find('select').val();\n    }\n  }\n\n  setValue(val) {\n    if (this.isSelect()) {\n      return this.$el.find('select').val(val);\n    }\n  }\n\n  getType() {\n    return this.$el.attr('data-type');\n  }\n\n  isSelect() {\n    return this.getType() === 'select';\n  }\n\n  isButton() {\n    return this.getType() === 'button';\n  }\n\n  bind(callback) {\n    if (this.isButton()) {\n      this.$el.on('click touchstart', (event) => {\n        $(':focus').blur();\n        callback(this.getCommand(), this);\n        event.preventDefault();\n      });\n    } else if (this.isSelect()) {\n      this.$el.find('select').change(() => {\n        callback(this.getCommand(), this);\n      });\n    }\n  }\n}\n\nexport default (context) => {\n  const triggerCommand = (cmd, item) => {\n    if (commands[cmd]) {\n      commands[cmd](cmd, context.ace, item);\n    }\n    if (context.ace) context.ace.focus();\n  };\n\n  // prevent close keyboard\n  $(document).on('touchend touchstart', '#mobileToolbar, #headings, .buttonicon.buttonicon-undo, .buttonicon.buttonicon-redo', (e) => {\n    e.preventDefault();\n  });\n\n  $('#mobileToolbar [data-action], #menu_editeMode [data-action]').each((i, elt) => {\n    $(elt).unbind('click');\n    new ToolbarItem($(elt)).bind((command, item) => {\n      triggerCommand(command, item);\n    });\n  });\n\n  const registerCommand = (cmd, callback) => {\n    commands[cmd] = callback;\n  };\n\n  const registerAceCommand = (cmd, callback) => {\n    registerCommand(cmd, (cmd, ace, item) => {\n      ace.callWithAce((ace) => {\n        callback(cmd, ace, item);\n      }, cmd, true);\n    });\n  };\n\n  const aceAttributeCommand = (cmd, ace) => {\n    ace.ace_toggleAttributeOnSelection(cmd);\n  };\n\n  // register tooblar buttons\n  registerAceCommand('bold', aceAttributeCommand);\n  registerAceCommand('italic', aceAttributeCommand);\n  registerAceCommand('underline', aceAttributeCommand);\n  registerAceCommand('insertunorderedlist', (cmd, ace) => {\n    ace.ace_doInsertUnorderedList();\n  });\n  registerAceCommand('insertorderedlist', (cmd, ace) => {\n    ace.ace_doInsertOrderedList();\n  });\n  registerAceCommand('undo', (cmd, ace) => ace.ace_doUndoRedo(cmd));\n  registerAceCommand('redo', (cmd, ace) => ace.ace_doUndoRedo(cmd));\n};\n","import db from './db';\n\n// TODO: refactor needed\nconst createRange = (node, chars, range) => {\n  if (!range) {\n    range = document.createRange();\n    range.selectNode(node);\n    range.setStart(node, 0);\n  }\n\n  if (chars.count === 0) {\n    range.setEnd(node, chars.count);\n  } else if (node && chars.count > 0) {\n    if (node.nodeType === Node.TEXT_NODE) {\n      if (node.textContent.length < chars.count) {\n        chars.count -= node.textContent.length;\n      } else {\n        range.setEnd(node, chars.count);\n        chars.count = 0;\n      }\n    } else {\n      for (let lp = 0; lp < node.childNodes.length; lp++) {\n        range = createRange(node.childNodes[lp], chars, range);\n\n        if (chars.count === 0) {\n          break;\n        }\n      }\n    }\n  }\n\n  return range;\n};\n\n\nconst setCurrentCursorPosition = (chars) => {\n  if (chars >= 0) {\n    const selection = window.getSelection();\n\n    const range = createRange($(document).find('iframe[name=\"ace_outer\"]')\n        .contents().find('iframe[name=\"ace_inner\"]').contents().find('#innerdocbody')[0], {count: chars});\n\n    if (range) {\n      range.collapse(false);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n};\n\n\nexport default (context) => {\n  $(document).on('click touchstart', '.floatingButton button', () => {\n    setCurrentCursorPosition(db.lastCaretPos);\n    // put the contents in to the editable mode\n    context.ace.callWithAce((ace) => {\n      ace.ace_setEditable(true);\n      // if the device is Android\n      if (!clientVars.userAgent.isSafari) {\n        $(document).find('iframe[name=\"ace_outer\"]')\n            .contents().find('iframe[name=\"ace_inner\"]')\n            .contents().find('#innerdocbody')[0].focus();\n      }\n    }, 'contentEditable', true);\n\n    $('.floatingButton').fadeOut('fast');\n    $('#mobileToolbar').show();\n    $('#menu_editeMode').css({display: 'flex'});\n  });\n};\n","import db from './db';\n\nconst viewPortHeight = window.innerHeight;\nlet touchStartPosX = 0;\n\nconst innderDoc = () => $(document)\n    .find('iframe[name=\"ace_outer\"]')\n    .contents().find('iframe[name=\"ace_inner\"]').contents();\n\nexport default (context) => {\n  const scrollDown = () => {\n    if (!db.keyboardOpen) {\n      $('#mainHeader').css({\n        transform: 'translateY(-100%)',\n      });\n    }\n\n    $('.floatingButton').css({\n      transform: 'translateY(160%)',\n    });\n  };\n\n  const scrollUp = () => {\n    $('#mainHeader').css({\n      transform: 'translateY(0)',\n    });\n    $('.floatingButton').css({\n      transform: 'translateY(0)',\n    });\n  };\n\n  // Detect Scroll Down and Up in mobile(android|ios)\n  innderDoc().on('touchmove', (e) => {\n    // Different devices give different values with different decimal percentages.\n    const currentPageX = Math.round(e.originalEvent.touches[0].screenY);\n\n    if (currentPageX <= 60) return false;\n    if (touchStartPosX === currentPageX) return false;\n\n    if (touchStartPosX - currentPageX > 0) {\n      // console.log('down');\n      scrollDown();\n    } else {\n      // console.log('up');\n      scrollUp();\n    }\n    touchStartPosX = currentPageX;\n  });\n\n  const onKeyboardOnOff = (isOpen, viewportHeight, pageTop) => {\n    // Write down your handling code\n    viewportHeight = Math.trunc(viewportHeight + pageTop);\n    if (isOpen) {\n      // keyboard is open\n      $('#mobileToolbar, #menu_editeMode').css('display', 'flex');\n      $('#openLeftSideMenue').hide();\n      $('.floatingButton').fadeOut('fast');\n      db.keyboardOpen = true;\n    } else {\n      // keyboard is closed\n      $('#mobileToolbar, #menu_editeMode').hide();\n      $('#openLeftSideMenue').show();\n      $('.floatingButton').fadeIn('fast');\n      // put the contents in to the readOnly mode\n      context.ace.callWithAce((ace) => {\n        ace.ace_setEditable(false);\n      }, 'contentEditable', true);\n      db.keyboardOpen = false;\n    }\n\n    $('html.pad, html.pad body').css({\n      height: `${viewportHeight}px`,\n    });\n  };\n\n  const scrollToFixViewPort = (viewport) => {\n    const selection = $(document).find('iframe[name=\"ace_outer\"]')\n        .contents().find('iframe[name=\"ace_inner\"]').contents()[0].getSelection();\n\n    const targetNode = selection.anchorNode.parentElement.closest('div');\n\n    if (!targetNode) return;\n\n    const $outerdoc = $('iframe[name=\"ace_outer\"]').contents().find('#outerdocbody');\n    const $outerdocHTML = $outerdoc.parent();\n    if (targetNode.offsetTop > viewport.height) {\n      // center of viewport\n      const offsetTop = targetNode.offsetTop - (viewport.height / 2);\n      $outerdoc.animate({scrollTop: offsetTop});\n      $outerdocHTML.animate({scrollTop: offsetTop});\n    }\n  };\n\n  const viewportHandler = (event) => {\n    event.preventDefault();\n    const viewport = event.target;\n    if (viewport.height < viewPortHeight) {\n      onKeyboardOnOff(true, viewport.height, viewport.pageTop);\n      scrollToFixViewPort(viewport);\n    } else {\n      // console.log(\"keyboard closed\")\n      onKeyboardOnOff(false, viewport.height, viewport.pageTop);\n    }\n  };\n\n  window.visualViewport.addEventListener('resize', viewportHandler);\n  window.visualViewport.addEventListener('scroll', viewportHandler);\n};\n","$.fn.ndModal = function () {\n  if ($(this).find('.blackScreen').length === 0) {\n    this.append('<div class=\"blackScreen\"></div>');\n  }\n\n  const closeModal = (el) => {\n    $(el).addClass('close');\n    setTimeout(() => {\n      $(el).removeClass('active close');\n    }, 600);\n  };\n\n  $(this).on('click touchstart', '.btnCloseNdModal', (e) => {\n    closeModal(this);\n  });\n\n  const closeBtn = `\n      <button class=\"btnCloseNdModal\">\n        <span class=\"icon close\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <path d=\"M6.75 17.25L17.25 6.75\" stroke=\"#333333\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M17.25 17.25L6.75 6.75\" stroke=\"#333333\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n        </span>\n      </button>\n    `;\n\n  if ($(this).find('.btnCloseNdModal').length === 0) {\n    $(this).find('.menue').prepend(closeBtn);\n  }\n\n  // if click to the balck screen close the modal\n  $(this).on('click touchstart', (e) => {\n    const isBlackScreen = $(e.target).hasClass('blackScreen');\n    const isWrapperActive = $(this).hasClass('active');\n    if (isBlackScreen && isWrapperActive) {\n      closeModal(this);\n    }\n  });\n\n  // I do not want the black screen event to be activated immediately.\n  setTimeout(() => {\n    $(this).addClass('active');\n  }, 200);\n\n  return this;\n};\n","import {aceEditorCSS as aceCss, aceEditEvent as aceEvents} from './hooks';\nimport toolbar from './toolbar';\nimport floatButton from './floatButton';\nimport viewportController from './viewportController';\nimport './ndModal.plugin';\n\nexport const aceEditorCSS = aceCss;\nexport const aceEditEvent = aceEvents;\n\nexport const postAceInit = (hookName, context) => {\n  if (!clientVars.userAgent.isMobile) return false;\n\n  // put the contents in to the readOnly mode\n  context.ace.callWithAce((ace) => {\n    ace.ace_setEditable(false);\n  }, 'disableContentEditable', true);\n\n  $(document).on('click touchstart', '#openLeftSideMenue', () => {\n    $('#tableOfContentsModal').ndModal();\n  });\n\n  viewportController(context);\n  toolbar(context);\n  floatButton(context);\n};\n\nexport const collectContentPre = (hookName, context) => {\n  const tname = context.tname;\n  if (\"i, b, u\".includes(tname)) {\n    context.state.author = clientVars.author = clientVars.userId;\n  }\n  return [];\n};\n"],"names":["db","lastCaretPos","keyboardOpen","commands","ToolbarItem","constructor","element","this","$el","getCommand","attr","getValue","isSelect","find","val","setValue","getType","isButton","bind","callback","on","event","$","blur","preventDefault","change","toolbar","context","document","e","each","i","elt","unbind","command","item","cmd","ace","focus","triggerCommand","registerAceCommand","registerCommand","callWithAce","aceAttributeCommand","ace_toggleAttributeOnSelection","ace_doInsertUnorderedList","ace_doInsertOrderedList","ace_doUndoRedo","createRange","node","chars","range","selectNode","setStart","count","setEnd","nodeType","Node","TEXT_NODE","textContent","length","lp","childNodes","floatButton","selection","window","getSelection","contents","collapse","removeAllRanges","addRange","setCurrentCursorPosition","ace_setEditable","clientVars","userAgent","isSafari","fadeOut","show","css","display","viewPortHeight","innerHeight","touchStartPosX","viewportController","currentPageX","Math","round","originalEvent","touches","screenY","transform","onKeyboardOnOff","isOpen","viewportHeight","pageTop","trunc","hide","fadeIn","height","viewportHandler","viewport","target","targetNode","anchorNode","parentElement","closest","$outerdoc","$outerdocHTML","parent","offsetTop","animate","scrollTop","scrollToFixViewPort","visualViewport","addEventListener","fn","ndModal","append","closeModal","el","addClass","setTimeout","removeClass","prepend","isBlackScreen","hasClass","isWrapperActive","aceEditorCSS","isMobile","aceEditEvent","hookName","call","cs","callstack","type","parentId","charCount","focusNode","id","parentNode","isChildOf","focusOffset","previousSibling","getCurrentCursorPosition","attributeManager","documentAttributeManager","caretAttr","hasAttributeOnSelectionOrCaretPosition","exports","collectContentPre","tname","includes","state","author","userId","postAceInit"],"mappings":"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"}