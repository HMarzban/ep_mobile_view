{"version":3,"file":"bundle.js","sources":["../js/db.js","../js/hooks.js","../js/toolbar.js","../js/utils.js","../js/floatButton.js","../js/viewportController.js","../js/ndModal.plugin.js","../js/index.js"],"sourcesContent":["export default {\n  lastCaretPos: 0,\n  keyboardOpen: false,\n  autoHideToolbar: false,\n};\n","import db from './db';\n\n/** Helper */\n// TODO: refactor needed\nconst isChildOf = (node, parentId) => {\n  while (node != null) {\n    if (node.id === parentId) {\n      return true;\n    }\n    node = node.parentNode;\n  }\n\n  return false;\n};\n\nconst getCurrentCursorPosition = (parentId) => {\n  const selection = $(document).find('iframe[name=\"ace_outer\"]')\n      .contents().find('iframe[name=\"ace_inner\"]').contents()[0].getSelection();\n  let charCount = -1;\n  let node;\n\n  if (selection.focusNode) {\n    if (isChildOf(selection.focusNode, parentId)) {\n      node = selection.focusNode;\n      charCount = selection.focusOffset;\n\n      while (node) {\n        if (node.id === parentId) {\n          break;\n        }\n\n        if (node.previousSibling) {\n          node = node.previousSibling;\n          charCount += node.textContent.length;\n        } else {\n          node = node.parentNode;\n          if (node == null) {\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  return charCount;\n};\n\n/** Hooks */\nexport const aceEditorCSS = () => {\n  if (!clientVars.userAgent.isMobile) return [];\n  return ['ep_mobile_view/static/css/innerMobile.css'];\n};\n\nexport const aceEditEvent = (hookName, call) => {\n  // If it's not a click or a key event and the text hasn't changed then do nothing\n  const cs = call.callstack;\n\n  // save last postion of the caret\n  // TODO: refactor needed\n  if ((cs.type === 'handleKeyEvent')) {\n    setTimeout(() => {\n      db.lastCaretPos = getCurrentCursorPosition('innerdocbody');\n    }, 200);\n  }\n\n  if (!(cs.type === 'handleClick') && !(cs.type === 'handleKeyEvent') && !(cs.docTextChanged)) {\n    return false;\n  }\n  // If it's an initial setup event then do nothing..\n  if (cs.type === 'setBaseText' || cs.type === 'setup') return false;\n\n  // toolbar caret attr check\n  setTimeout(() => {\n    const attributeManager = call.documentAttributeManager;\n    $('#mobileToolbar > ul > li').removeClass('active');\n\n    for (const caretAttr of ['bold', 'italic', 'underline']) {\n      const activeCaret = attributeManager.hasAttributeOnSelectionOrCaretPosition(caretAttr);\n      if (activeCaret) {\n        $(`#mobileToolbar > ul > li[data-action=\"${caretAttr}\"]`).addClass('active');\n      }\n    }\n  }, 250);\n\n  return {};\n};\n","const commands = {};\n\nclass ToolbarItem {\n  constructor(element) {\n    this.$el = element;\n  }\n\n  getCommand() {\n    return this.$el.attr('data-action');\n  }\n\n  getValue() {\n    if (this.isSelect()) {\n      return this.$el.find('select').val();\n    }\n  }\n\n  setValue(val) {\n    if (this.isSelect()) {\n      return this.$el.find('select').val(val);\n    }\n  }\n\n  getType() {\n    return this.$el.attr('data-type');\n  }\n\n  isSelect() {\n    return this.getType() === 'select';\n  }\n\n  isButton() {\n    return this.getType() === 'button';\n  }\n\n  bind(callback) {\n    if (this.isButton()) {\n      this.$el.on('click touchstart', (event) => {\n        $(':focus').blur();\n        callback(this.getCommand(), this);\n        event.preventDefault();\n      });\n    } else if (this.isSelect()) {\n      this.$el.find('select').change(() => {\n        callback(this.getCommand(), this);\n      });\n    }\n  }\n}\n\nexport default (context) => {\n  const triggerCommand = (cmd, item) => {\n    if (commands[cmd]) {\n      commands[cmd](cmd, context.ace, item);\n    }\n    if (context.ace) context.ace.focus();\n  };\n\n  const preventTouchElemets = '#mobileToolbar, #headings, .buttonicon-undo, .buttonicon-redo';\n  // prevent close keyboard\n  $(document).on('touchend touchstart', preventTouchElemets, (e) => {\n    e.preventDefault();\n  });\n\n  $('#mobileToolbar [data-action], #menu_editeMode [data-action]').each((i, elt) => {\n    $(elt).unbind('click');\n    new ToolbarItem($(elt)).bind((command, item) => {\n      triggerCommand(command, item);\n    });\n  });\n\n  const registerCommand = (cmd, callback) => {\n    commands[cmd] = callback;\n  };\n\n  const registerAceCommand = (cmd, callback) => {\n    registerCommand(cmd, (cmd, ace, item) => {\n      ace.callWithAce((ace) => {\n        callback(cmd, ace, item);\n      }, cmd, true);\n    });\n  };\n\n  const aceAttributeCommand = (cmd, ace) => {\n    ace.ace_toggleAttributeOnSelection(cmd);\n  };\n\n  // register tooblar buttons\n  registerAceCommand('bold', aceAttributeCommand);\n  registerAceCommand('italic', aceAttributeCommand);\n  registerAceCommand('underline', aceAttributeCommand);\n  registerAceCommand('insertunorderedlist', (cmd, ace) => {\n    ace.ace_doInsertUnorderedList();\n  });\n  registerAceCommand('insertorderedlist', (cmd, ace) => {\n    ace.ace_doInsertOrderedList();\n  });\n  registerAceCommand('undo', (cmd, ace) => ace.ace_doUndoRedo(cmd));\n  registerAceCommand('redo', (cmd, ace) => ace.ace_doUndoRedo(cmd));\n};\n","export const $outerBody = () => $('iframe[name=\"ace_outer\"]').contents().find('body');\n","import db from './db';\nimport {$outerBody} from './utils';\n\n\n// TODO: refactor needed\nconst createRange = (node, chars, range) => {\n  if (!range) {\n    range = document.createRange();\n    range.selectNode(node);\n    range.setStart(node, 0);\n  }\n\n  if (chars.count === 0) {\n    range.setEnd(node, chars.count);\n  } else if (node && chars.count > 0) {\n    if (node.nodeType === Node.TEXT_NODE) {\n      if (node.textContent.length < chars.count) {\n        chars.count -= node.textContent.length;\n      } else {\n        range.setEnd(node, chars.count);\n        chars.count = 0;\n      }\n    } else {\n      for (let lp = 0; lp < node.childNodes.length; lp++) {\n        range = createRange(node.childNodes[lp], chars, range);\n\n        if (chars.count === 0) {\n          break;\n        }\n      }\n    }\n  }\n\n  return range;\n};\n\n\nconst setCurrentCursorPosition = (chars) => {\n  if (chars >= 0) {\n    const selection = window.getSelection();\n    const innerdoc = $(document).find('iframe[name=\"ace_outer\"]')\n        .contents()\n        .find('iframe[name=\"ace_inner\"]')\n        .contents()\n        .find('#innerdocbody')[0];\n\n    const range = createRange(innerdoc, {count: chars});\n\n    if (range) {\n      range.collapse(false);\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n};\n\n\nexport default (context) => {\n  const fButton = `\n    <div class=\"floatingButton\">\n      <button>\n        <span class=\"icon pencil\"></span>\n      </button>\n    </div>\n  `;\n\n  $outerBody().append(fButton);\n\n  $outerBody().on('click touchstart', '.floatingButton button', () => {\n    setCurrentCursorPosition(db.lastCaretPos);\n    // put the contents in to the editable mode\n    context.ace.callWithAce((ace) => {\n      ace.ace_setEditable(true);\n      // if the device is Android\n      if (!clientVars.userAgent.isSafari) {\n        $(document).find('iframe[name=\"ace_outer\"]')\n            .contents().find('iframe[name=\"ace_inner\"]')\n            .contents().find('#innerdocbody')[0].focus();\n      }\n    }, 'contentEditable', true);\n\n    $outerBody().find('.floatingButton').fadeOut('fast');\n    $('#mobileToolbar').show();\n\n    $('body.mobileView header .title, #openLeftSideMenue')\n        .hide(0, () => {\n          $('#menu_editeMode').css({display: 'flex'});\n        });\n  });\n};\n","import db from './db';\nimport {$outerBody} from './utils';\n\nconst viewPortHeight = window.innerHeight;\nlet touchStartPosX = 0;\n\nconst innderDoc = () => $(document)\n    .find('iframe[name=\"ace_outer\"]')\n    .contents().find('iframe[name=\"ace_inner\"]').contents();\n\nexport default (context) => {\n  const scrollDown = () => {\n    if (!db.keyboardOpen) {\n      $('#mainHeader').css({\n        transform: 'translateY(-100%)',\n      });\n    }\n\n    $outerBody().find('.floatingButton').css({\n      transform: 'translateY(160%)',\n    });\n  };\n\n  const scrollUp = () => {\n    $('#mainHeader').css({\n      transform: 'translateY(0)',\n    });\n    $outerBody().find('.floatingButton').css({\n      transform: 'translateY(0)',\n    });\n  };\n\n  // Detect Scroll Down and Up in mobile(android|ios)\n  innderDoc().on('touchmove', (e) => {\n    if (!db.autoHideToolbar) return;\n    // Different devices give different values with different decimal percentages.\n    const currentPageX = Math.round(e.originalEvent.touches[0].screenY);\n\n    if (currentPageX <= 60) return false;\n    if (touchStartPosX === currentPageX) return false;\n\n    if (touchStartPosX - currentPageX > 0) {\n      // console.log('down');\n      scrollDown();\n    } else {\n      // console.log('up');\n      scrollUp();\n    }\n    touchStartPosX = currentPageX;\n  });\n\n  const onKeyboardOnOff = (isOpen, viewportHeight, pageTop) => {\n    // Write down your handling code\n    viewportHeight = Math.trunc(viewportHeight + pageTop);\n    if (isOpen) {\n      // keyboard is open\n      $('#mobileToolbar, #menu_editeMode').css('display', 'flex');\n      $('#openLeftSideMenue').hide();\n      $outerBody().find('.floatingButton').fadeOut('fast');\n      db.keyboardOpen = true;\n    } else {\n      // keyboard is closed\n      $('#mobileToolbar, #menu_editeMode').hide();\n      $('#openLeftSideMenue, body.mobileView header .title').show();\n      $outerBody().find('.floatingButton').fadeIn('fast');\n      // put the contents in to the readOnly mode\n      context.ace.callWithAce((ace) => {\n        ace.ace_setEditable(false);\n      }, 'contentEditable', true);\n      db.keyboardOpen = false;\n      // ios close keyboard\n      $(document).find('iframe[name=\"ace_outer\"]')\n          .contents().find('iframe[name=\"ace_inner\"]')\n          .contents()[0].activeElement.blur();\n\n      // navigator.virtualKeyboard.hide();\n    }\n\n    $('html.pad, html.pad body').css({\n      height: `${viewportHeight}px`,\n    });\n  };\n\n  const scrollToFixViewPort = (viewport) => {\n    const selection = $(document).find('iframe[name=\"ace_outer\"]')\n        .contents().find('iframe[name=\"ace_inner\"]').contents()[0].getSelection();\n\n    const targetNode = selection.anchorNode.parentElement.closest('div');\n\n    if (!targetNode) return;\n\n    const $outerdoc = $('iframe[name=\"ace_outer\"]').contents().find('#outerdocbody');\n    const $outerdocHTML = $outerdoc.parent();\n    if (targetNode.offsetTop > viewport.height) {\n      // center of viewport\n      const offsetTop = targetNode.offsetTop - (viewport.height / 2);\n      $outerdoc.animate({scrollTop: offsetTop});\n      $outerdocHTML.animate({scrollTop: offsetTop});\n    }\n  };\n\n  const viewportHandler = (event) => {\n    event.preventDefault();\n    const viewport = event.target;\n    if (viewport.height < viewPortHeight) {\n      onKeyboardOnOff(true, viewport.height, viewport.pageTop);\n      // scrollToFixViewPort(viewport);\n    } else {\n      // console.log(\"keyboard closed\")\n      onKeyboardOnOff(false, viewport.height, viewport.pageTop);\n    }\n  };\n\n  window.visualViewport.addEventListener('resize', viewportHandler);\n  window.visualViewport.addEventListener('scroll', viewportHandler);\n\n  $(document).on('click touchstart', '#closeVirtualKeyboar', (event) => {\n    $('#menu_editeMode').hide(0, () => {\n      $('body.mobileView header .title, #openLeftSideMenue').show();\n      viewportHandler(event);\n    });\n  });\n};\n","$.fn.ndModal = function () {\n  if ($(this).find('.blackScreen').length === 0) {\n    this.append('<div class=\"blackScreen\"></div>');\n  }\n\n  const closeModal = (el) => {\n    $(el).addClass('close');\n    setTimeout(() => {\n      $(el).removeClass('active close');\n    }, 600);\n  };\n\n  $(this).on('click touchstart', '.btnCloseNdModal', (e) => {\n    closeModal(this);\n  });\n\n  const closeBtn = `\n      <button class=\"btnCloseNdModal\">\n        <span class=\"icon close\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <path d=\"M6.75 17.25L17.25 6.75\" stroke=\"#333333\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M17.25 17.25L6.75 6.75\" stroke=\"#333333\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n        </span>\n      </button>\n    `;\n\n  if ($(this).find('.btnCloseNdModal').length === 0) {\n    $(this).find('.menue').prepend(closeBtn);\n  }\n\n  // if click to the balck screen close the modal\n  $(this).on('click touchstart', (e) => {\n    const isBlackScreen = $(e.target).hasClass('blackScreen');\n    const isWrapperActive = $(this).hasClass('active');\n    if (isBlackScreen && isWrapperActive) {\n      closeModal(this);\n    }\n  });\n\n  // I do not want the black screen event to be activated immediately.\n  setTimeout(() => {\n    $(this).addClass('active');\n  }, 200);\n\n  return this;\n};\n","import {aceEditorCSS as aceCss, aceEditEvent as aceEvents} from './hooks';\nimport toolbar from './toolbar';\nimport floatButton from './floatButton';\nimport viewportController from './viewportController';\nimport './ndModal.plugin';\n\nexport const aceEditorCSS = aceCss;\nexport const aceEditEvent = aceEvents;\n\nexport const postAceInit = (hookName, context) => {\n  if (!clientVars.userAgent.isMobile) return false;\n\n  // put the contents in to the readOnly mode\n  context.ace.callWithAce((ace) => {\n    ace.ace_setEditable(false);\n  }, 'disableContentEditable', true);\n\n  $(document).on('touchstart', '#openLeftSideMenue', () => {\n    $('#tableOfContentsModal').ndModal();\n  });\n\n  viewportController(context);\n  toolbar(context);\n  floatButton(context);\n};\n\nexport const collectContentPre = (hookName, context) => {\n  const tname = context.tname;\n  if ('i, b, u'.includes(tname)) {\n    context.state.author = clientVars.author = clientVars.userId;\n  }\n  return [];\n};\n"],"names":["aceEditorCSS","aceEditEvent","aceCss","aceEvents"],"mappings":"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"}